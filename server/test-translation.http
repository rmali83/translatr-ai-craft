### Test Translation API with TM Integration and Glossary Support
### Use REST Client extension in VS Code or similar tool

### 1. First translation (will use AI and save to TM)
POST http://localhost:5000/api/translate
Content-Type: application/json

{
  "source_text": "Hello, how are you?",
  "source_lang": "EN",
  "target_lang": "FR"
}

### Expected Response:
# {
#   "success": true,
#   "data": {
#     "source_text": "Hello, how are you?",
#     "translated_text": "[Translated to FR] Hello, how are you?",
#     "source_lang": "EN",
#     "target_lang": "FR",
#     "source": "AI",
#     "tm_id": "uuid-here",
#     "glossary_terms_used": 0
#   }
# }

###

### 2. Same translation again (will use TM)
POST http://localhost:5000/api/translate
Content-Type: application/json

{
  "source_text": "Hello, how are you?",
  "source_lang": "EN",
  "target_lang": "FR"
}

### Expected Response:
# {
#   "success": true,
#   "data": {
#     "source_text": "Hello, how are you?",
#     "translated_text": "[Translated to FR] Hello, how are you?",
#     "source_lang": "EN",
#     "target_lang": "FR",
#     "source": "TM",
#     "tm_id": "uuid-here"
#   }
# }

###

### 3. Add glossary terms first
POST http://localhost:5000/api/glossary
Content-Type: application/json

{
  "source_term": "Dashboard",
  "target_term": "Tableau de bord",
  "language_pair": "EN-FR",
  "description": "Main application dashboard"
}

###

POST http://localhost:5000/api/glossary
Content-Type: application/json

{
  "source_term": "Settings",
  "target_term": "Param√®tres",
  "language_pair": "EN-FR",
  "description": "Application settings"
}

###

### 4. Translation with glossary terms (AI will use glossary)
POST http://localhost:5000/api/translate
Content-Type: application/json

{
  "source_text": "Go to Dashboard and open Settings",
  "source_lang": "EN",
  "target_lang": "FR",
  "use_glossary": true
}

### Expected: AI will enforce glossary terms in translation

###

### 5. Translation without glossary
POST http://localhost:5000/api/translate
Content-Type: application/json

{
  "source_text": "Go to Dashboard and open Settings",
  "source_lang": "EN",
  "target_lang": "FR",
  "use_glossary": false
}

###

### 6. Translation with project_id (creates segment)
POST http://localhost:5000/api/translate
Content-Type: application/json

{
  "source_text": "Welcome to our application",
  "source_lang": "EN",
  "target_lang": "FR",
  "project_id": "your-project-uuid-here"
}

###

### 7. Batch translation with glossary
POST http://localhost:5000/api/translate/batch
Content-Type: application/json

{
  "texts": [
    "Good morning",
    "Good afternoon",
    "Good evening",
    "Open Dashboard",
    "Change Settings"
  ],
  "source_lang": "EN",
  "target_lang": "FR",
  "use_glossary": true
}

### Expected Response:
# {
#   "success": true,
#   "data": {
#     "results": [...],
#     "total": 5,
#     "tm_matches": 0,
#     "ai_translations": 5,
#     "glossary_terms_used": 2
#   }
# }

###

### 8. Language detection
POST http://localhost:5000/api/translate/detect
Content-Type: application/json

{
  "text": "Bonjour, comment allez-vous?"
}

###

### 9. Check translation memory
GET http://localhost:5000/api/tm?source_lang=EN&target_lang=FR

###

### 10. Search translation memory
GET http://localhost:5000/api/tm/search?text=Hello&source_lang=EN&target_lang=FR

###

### 11. Get glossary terms
GET http://localhost:5000/api/glossary?language_pair=EN-FR

###

### 12. Test with OpenAI (set AI_PROVIDER=openai in .env)
# Make sure to set OPENAI_API_KEY in .env first
POST http://localhost:5000/api/translate
Content-Type: application/json

{
  "source_text": "The quick brown fox jumps over the lazy dog",
  "source_lang": "English",
  "target_lang": "French",
  "use_glossary": false
}

###

### 13. Test with Anthropic (set AI_PROVIDER=anthropic in .env)
# Make sure to set ANTHROPIC_API_KEY in .env first
POST http://localhost:5000/api/translate
Content-Type: application/json

{
  "source_text": "The quick brown fox jumps over the lazy dog",
  "source_lang": "English",
  "target_lang": "Spanish",
  "use_glossary": false
}
